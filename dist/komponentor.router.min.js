/*! komponentor v1.0.0
 * A jQuery-based component loading system
 * (c) 2025 
 * Released under the MIT License
 */
!function(t){"use strict";const e={routes:{},currentRoute:null,defaultRoute:null,container:null,options:{debug:!1,autoInit:!0}},o=(...t)=>{e.options.debug&&console.log("[KomponentorRouter]",...t)};e.init=function(e={}){return Object.assign(this.options,e),e.container&&(this.container=t(e.container)),e.defaultRoute&&(this.defaultRoute=e.defaultRoute),window.addEventListener("load",(()=>this.handleRoute())),window.addEventListener("hashchange",(t=>{o("Route handler called from:",(new Error).stack.split("\n")[2].trim()),t.preventDefault(),this.handleRoute()})),o("Router initialized",this.options),this},e.route=function(t,e){return"string"==typeof e&&(e={url:e}),this.routes[t]=e,o("Route added",t,e),this},e.parseRoute=function(){const t=window.location.hash.substring(1)||this.defaultRoute||"",[e,...o]=t.split("|"),n={};return o.forEach((t=>{const[e,o]=t.split("=");n[e]=o})),{path:e,params:n,hash:t}},e.handleRoute=async function(){const e=this.parseRoute();if(this.currentRoute&&this.currentRoute.hash===e.hash)return void o("Hash unchanged, skipping route handling");let n=null;const i=Object.keys(this.routes).sort();for(let t=0;t<i.length;t++)if(e.path.match(new RegExp("^"+i[t]+"$"))){n=this.routes[i[t]];break}if(o("Handling route",e,n),!n)return o("No handler found for route",e.path),void(this.defaultRoute&&e.path!==this.defaultRoute&&this.navigate(this.defaultRoute));try{if("function"==typeof n)await n(e);else if("object"==typeof n){if(!this.container)throw new Error("No container specified for component rendering");this.container.empty();const o=t("<div>").attr("is","komponent").appendTo(this.container);await o.komponent({...n,data:{...n.data,...e.params}})}this.currentRoute=e,o("Route handled successfully",e)}catch(t){console.error("Error handling route:",t)}},e.navigate=function(t,e={}){const o=Object.entries(e).map((([t,e])=>`${t}=${e}`)).join("|"),n=o?`${t}|${o}`:t;window.location.hash=n},e.getCurrentRoute=function(){return this.currentRoute},window.KomponentorRouter=e,t(document).ready((()=>{void 0!==window.komponentor?e.options.autoInit&&e.init():console.error("Komponentor not found. Make sure komponentor.modern.js is loaded first.")}))}(jQuery);
//# sourceMappingURL=komponentor.router.min.js.map
